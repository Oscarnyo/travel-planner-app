const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
  } = require("@google/generative-ai");
  
  const apiKey = process.env.GOOGLE_GERMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 64,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
  
export const chatSession = model.startChat({
    generationConfig,
    history: [
      {
        role: "user",
        parts: [
          {text: "Generate Travel Plan for Location: Tokyo, Japan, for 5 Days and 4 Night for Family with a Moderate budget with a location, Flight details, Flight Price with Booking url, Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating descriptions and Places to visit nearby with placename, Place Details, Place Image URL, GEO Coordinates, ticket Pricing, Time to travel each of the location for 5 days and 4 night with each day plan with best time to visit in JSON format."},
        ],
      },
      {
        role: "model",
        parts: [
          {text: "```json\n{\n  \"location\": \"Tokyo, Japan\",\n  \"duration\": \"5 days and 4 nights\",\n  \"budget\": \"Moderate\",\n  \"flight_details\": {\n    \"airline\": \"ANA All Nippon Airways\",\n    \"flight_number\": \"NH101\",\n    \"departure_city\": \"New York City\",\n    \"arrival_city\": \"Tokyo\",\n    \"departure_date\": \"2024-03-15\",\n    \"arrival_date\": \"2024-03-16\",\n    \"departure_time\": \"10:00 AM\",\n    \"arrival_time\": \"5:00 PM\",\n    \"price\": \"$1,200\",\n    \"booking_url\": \"https://www.ana.co.jp/en/jp/booking/flights/\"\n  },\n  \"hotel_options\": [\n    {\n      \"hotel_name\": \"Park Hyatt Tokyo\",\n      \"hotel_address\": \"3-1-1 Shibuya, Shibuya-ku, Tokyo 150-8502, Japan\",\n      \"price\": \"$350 - $500 per night\",\n      \"hotel_image_url\": \"https://www.hyatt.com/en-US/hotel/japan/tokyo/park-hyatt-tokyo/photos\",\n      \"geo_coordinates\": {\n        \"latitude\": 35.6646,\n        \"longitude\": 139.7004\n      },\n      \"rating\": \"4.5 stars\",\n      \"rating_description\": \"Luxury hotel with stunning views, impeccable service, and world-class dining.\",\n      \"places_to_visit_nearby\": [\n        {\n          \"place_name\": \"Shibuya Crossing\",\n          \"place_details\": \"Famous pedestrian crossing with iconic scramble\",\n          \"place_image_url\": \"https://www.japan-guide.com/e/e3018_01.html\",\n          \"geo_coordinates\": {\n            \"latitude\": 35.6694,\n            \"longitude\": 139.6998\n          },\n          \"ticket_pricing\": \"Free\",\n          \"time_to_travel\": \"15 minutes walk\"\n        },\n        {\n          \"place_name\": \"Meiji Jingu Shrine\",\n          \"place_details\": \"Tranquil shrine dedicated to Emperor Meiji and Empress Shoken\",\n          \"place_image_url\": \"https://www.japan-guide.com/e/e3004_01.html\",\n          \"geo_coordinates\": {\n            \"latitude\": 35.6727,\n            \"longitude\": 139.6871\n          },\n          \"ticket_pricing\": \"Free\",\n          \"time_to_travel\": \"30 minutes walk or 10 minutes by train\"\n        }\n      ]\n    },\n    {\n      \"hotel_name\": \"Imperial Hotel\",\n      \"hotel_address\": \"1-1 Marunouchi 1-chome, Chiyoda-ku, Tokyo 100-8558, Japan\",\n      \"price\": \"$250 - $400 per night\",\n      \"hotel_image_url\": \"https://www.imperialhotel.co.jp/en/tokyo/gallery/\",\n      \"geo_coordinates\": {\n        \"latitude\": 35.6778,\n        \"longitude\": 139.7661\n      },\n      \"rating\": \"4 stars\",\n      \"rating_description\": \"Historic hotel with elegant rooms, fine dining, and a central location.\",\n      \"places_to_visit_nearby\": [\n        {\n          \"place_name\": \"Tokyo Station\",\n          \"place_details\": \"Major transportation hub and architectural landmark\",\n          \"place_image_url\": \"https://www.japan-guide.com/e/e3010_01.html\",\n          \"geo_coordinates\": {\n            \"latitude\": 35.6812,\n            \"longitude\": 139.7661\n          },\n          \"ticket_pricing\": \"Free\",\n          \"time_to_travel\": \"2 minutes walk\"\n        },\n        {\n          \"place_name\": \"Ginza District\",\n          \"place_details\": \"Upscale shopping and dining area with luxury boutiques and art galleries\",\n          \"place_image_url\": \"https://www.japan-guide.com/e/e3015_01.html\",\n          \"geo_coordinates\": {\n            \"latitude\": 35.6698,\n            \"longitude\": 139.7673\n          },\n          \"ticket_pricing\": \"Free\",\n          \"time_to_travel\": \"15 minutes walk\"\n        }\n      ]\n    },\n    {\n      \"hotel_name\": \"Mandarin Oriental Tokyo\",\n      \"hotel_address\": \"2-1-1 Nihonbashi Muromachi, Chuo-ku, Tokyo 103-8283, Japan\",\n      \"price\": \"$300 - $450 per night\",\n      \"hotel_image_url\": \"https://www.mandarinoriental.com/tokyo/nihonbashi/gallery/\",\n      \"geo_coordinates\": {\n        \"latitude\": 35.6838,\n        \"longitude\": 139.7702\n      },\n      \"rating\": \"4.5 stars\",\n      \"rating_description\": \"Sophisticated hotel with elegant rooms, panoramic views, and a rooftop bar.\",\n      \"places_to_visit_nearby\": [\n        {\n          \"place_name\": \"Nihombashi\",\n          \"place_details\": \"Historic commercial district with traditional shops and markets\",\n          \"place_image_url\": \"https://www.japan-guide.com/e/e3016_01.html\",\n          \"geo_coordinates\": {\n            \"latitude\": 35.6834,\n            \"longitude\": 139.7700\n          },\n          \"ticket_pricing\": \"Free\",\n          \"time_to_travel\": \"5 minutes walk\"\n        },\n        {\n          \"place_name\": \"Sumida River\",\n          \"place_details\": \"Scenic river offering boat cruises and riverside views\",\n          \"place_image_url\": \"https://www.japan-guide.com/e/e3022_01.html\",\n          \"geo_coordinates\": {\n            \"latitude\": 35.6897,\n            \"longitude\": 139.7821\n          },\n          \"ticket_pricing\": \"Varies by cruise\",\n          \"time_to_travel\": \"15 minutes walk or 5 minutes by train\"\n        }\n      ]\n    }\n  ],\n  \"daily_plan\": [\n    {\n      \"day\": \"Day 1\",\n      \"best_time_to_visit\": \"Morning\",\n      \"activities\": [\n        {\n          \"place_name\": \"Sensoji Temple\",\n          \"place_details\": \"Tokyo's oldest temple, famous for its Kaminarimon gate and Nakamise-dori shopping street\",\n          \"place_image_url\": \"https://www.japan-guide.com/e/e3012_01.html\",\n          \"geo_coordinates\": {\n            \"latitude\": 35.7088,\n            \"longitude\": 139.7976\n          },\n          \"ticket_pricing\": \"Free\",\n          \"time_to_travel\": \"2 hours\"\n        },\n        {\n          \"place_name\": \"Tokyo Skytree\",\n          \"place_details\": \"Tallest structure in Japan, offering panoramic views of the city\",\n          \"place_image_url\": \"https://www.tokyo-skytree.jp/en/\",\n          \"geo_coordinates\": {\n            \"latitude\": 35.7101,\n            \"longitude\": 139.8106\n          },\n          \"ticket_pricing\": \"Around $30\",\n          \"time_to_travel\": \"2 hours\"\n        }\n      ]\n    },\n    {\n      \"day\": \"Day 2\",\n      \"best_time_to_visit\": \"Afternoon\",\n      \"activities\": [\n        {\n          \"place_name\": \"Ghibli Museum\",\n          \"place_details\": \"Museum dedicated to the works of Studio Ghibli, featuring interactive exhibits and a whimsical atmosphere\",\n          \"place_image_url\": \"https://www.ghibli-museum.jp/en/\",\n          \"geo_coordinates\": {\n            \"latitude\": 35.7005,\n            \"longitude\": 139.6888\n          },\n          \"ticket_pricing\": \"Around $25\",\n          \"time_to_travel\": \"3 hours\"\n        },\n        {\n          \"place_name\": \"Harajuku\",\n          \"place_details\": \"Trendy district known for its street fashion, cafes, and Takeshita Street\",\n          \"place_image_url\": \"https://www.japan-guide.com/e/e3017_01.html\",\n          \"geo_coordinates\": {\n            \"latitude\": 35.6701,\n            \"longitude\": 139.7006\n          },\n          \"ticket_pricing\": \"Free\",\n          \"time_to_travel\": \"2 hours\"\n        }\n      ]\n    },\n    {\n      \"day\": \"Day 3\",\n      \"best_time_to_visit\": \"All Day\",\n      \"activities\": [\n        {\n          \"place_name\": \"Ueno Park\",\n          \"place_details\": \"Large park with museums, a zoo, shrines, and a pond\",\n          \"place_image_url\": \"https://www.japan-guide.com/e/e3014_01.html\",\n          \"geo_coordinates\": {\n            \"latitude\": 35.7136,\n            \"longitude\": 139.7706\n          },\n          \"ticket_pricing\": \"Free\",\n          \"time_to_travel\": \"4 hours\"\n        },\n        {\n          \"place_name\": \"Akihabara\",\n          \"place_details\": \"District known for its electronics, anime, and manga culture\",\n          \"place_image_url\": \"https://www.japan-guide.com/e/e3019_01.html\",\n          \"geo_coordinates\": {\n            \"latitude\": 35.6998,\n            \"longitude\": 139.7734\n          },\n          \"ticket_pricing\": \"Free\",\n          \"time_to_travel\": \"3 hours\"\n        }\n      ]\n    },\n    {\n      \"day\": \"Day 4\",\n      \"best_time_to_visit\": \"Morning\",\n      \"activities\": [\n        {\n          \"place_name\": \"Tsukiji Fish Market\",\n          \"place_details\": \"Famous fish market known for its tuna auction and fresh seafood\",\n          \"place_image_url\": \"https://www.japan-guide.com/e/e3013_01.html\",\n          \"geo_coordinates\": {\n            \"latitude\": 35.6679,\n            \"longitude\": 139.7895\n          },\n          \"ticket_pricing\": \"Free\",\n          \"time_to_travel\": \"2 hours\"\n        },\n        {\n          \"place_name\": \"Tokyo Disneyland\",\n          \"place_details\": \"Theme park featuring Disney characters, rides, and entertainment\",\n          \"place_image_url\": \"https://www.tokyodisneyresort.jp/en/\",\n          \"geo_coordinates\": {\n            \"latitude\": 35.6320,\n            \"longitude\": 139.9686\n          },\n          \"ticket_pricing\": \"Around $80\",\n          \"time_to_travel\": \"Full Day\"\n        }\n      ]\n    },\n    {\n      \"day\": \"Day 5\",\n      \"best_time_to_visit\": \"Afternoon\",\n      \"activities\": [\n        {\n          \"place_name\": \"Shibuya Crossing\",\n          \"place_details\": \"Famous pedestrian crossing with iconic scramble\",\n          \"place_image_url\": \"https://www.japan-guide.com/e/e3018_01.html\",\n          \"geo_coordinates\": {\n            \"latitude\": 35.6694,\n            \"longitude\": 139.6998\n          },\n          \"ticket_pricing\": \"Free\",\n          \"time_to_travel\": \"1 hour\"\n        },\n        {\n          \"place_name\": \"Shinjuku Gyoen National Garden\",\n          \"place_details\": \"Beautiful park with traditional Japanese gardens, a greenhouse, and a French-style garden\",\n          \"place_image_url\": \"https://www.japan-guide.com/e/e3008_01.html\",\n          \"geo_coordinates\": {\n            \"latitude\": 35.6973,\n            \"longitude\": 139.7025\n          },\n          \"ticket_pricing\": \"Around $2\",\n          \"time_to_travel\": \"2 hours\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Notes:**\n\n* This itinerary provides a moderate budget plan. Adjust the hotel and activity choices based on your family's preferences and budget. \n* Flight prices are approximate and may vary depending on the time of year and availability.\n* The \"Time to travel\" estimates are for walking distances. Actual travel times may vary depending on transportation methods and traffic conditions.\n* Consider purchasing a Japan Rail Pass if you plan to travel extensively by train.\n* Remember to book attractions in advance, especially popular ones like the Ghibli Museum.\n\n**Additional Tips:**\n\n* Learn some basic Japanese phrases.\n* Pack comfortable walking shoes as you'll be doing a lot of walking.\n* Download a translation app for convenience.\n* Be mindful of cultural etiquette and customs.\n\n**Enjoy your trip to Tokyo!** \n"},
        ],
      },
    ],
});
  
// const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
// console.log(result.response.text());
  
